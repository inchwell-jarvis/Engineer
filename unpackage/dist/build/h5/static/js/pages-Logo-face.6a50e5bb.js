(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Logo-face"],{"1a0d":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){}));var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"inputArea assd"},[t("v-uni-input",{staticClass:"inputClass",attrs:{placeholder:"请输入账号",maxlength:"20"},model:{value:e.loginPhone,callback:function(n){e.loginPhone=n},expression:"loginPhone"}})],1),t("v-uni-view",[t("v-uni-button",{on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.inter(1)}}},[e._v("活体检测")]),t("v-uni-button",{on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.inter(2)}}},[e._v("人脸图像采集")])],1),t("v-uni-view",{staticClass:"asd"},[t("v-uni-textarea",{model:{value:e.Base64,callback:function(n){e.Base64=n},expression:"Base64"}})],1),t("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[t("v-uni-view",{staticClass:"msg",domProps:{innerHTML:e._s(e.logoSrcs)}})],1)],1)},i=[]},"2f74":function(e,n,t){"use strict";t("7a82");var a=t("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.base64ToPath=function(e){return new Promise((function(n,t){if("object"===("undefined"===typeof window?"undefined":(0,i.default)(window))&&"document"in window){e=e.split(",");var a=e[0].match(/:(.*?);/)[1],o=atob(e[1]),s=o.length,r=new Uint8Array(s);while(s--)r[s]=o.charCodeAt(s);return n((window.URL||window.webkitURL).createObjectURL(new Blob([r],{type:a})))}var c=e.match(/data\:\S+\/(\S+);/);c?c=c[1]:t(new Error("base64 error"));var u=Date.now()+"."+c;if("object"!==("undefined"===typeof plus?"undefined":(0,i.default)(plus)))if("object"===("undefined"===typeof wx?"undefined":(0,i.default)(wx))&&wx.canIUse("getFileSystemManager")){var d=wx.env.USER_DATA_PATH+"/"+u;wx.getFileSystemManager().writeFile({filePath:d,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){n(d)},fail:function(e){t(e)}})}else t(new Error("not support"));else{var f=new plus.nativeObj.Bitmap("bitmap"+Date.now());f.loadBase64Data(e,(function(){var e="_doc/uniapp_temp/"+u;f.save(e,{},(function(){f.clear(),n(e)}),(function(e){f.clear(),t(e)}))}),(function(e){f.clear(),t(e)}))}}))},n.pathToBase64=function(e){return new Promise((function(n,t){if("object"===("undefined"===typeof window?"undefined":(0,i.default)(window))&&"document"in window){if("function"===typeof FileReader){var a=new XMLHttpRequest;return a.open("GET",e,!0),a.responseType="blob",a.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){n(e.target.result)},e.onerror=t,e.readAsDataURL(this.response)}},a.onerror=t,void a.send()}var o=document.createElement("canvas"),s=o.getContext("2d"),r=new Image;return r.onload=function(){o.width=r.width,o.height=r.height,s.drawImage(r,0,0),n(o.toDataURL()),o.height=o.width=0},r.onerror=t,void(r.src=e)}"object"!==("undefined"===typeof plus?"undefined":(0,i.default)(plus))?"object"===("undefined"===typeof wx?"undefined":(0,i.default)(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){n("data:image/png;base64,"+e.data)},fail:function(e){t(e)}}):t(new Error("not support")):plus.io.resolveLocalFileSystemURL(function(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var n=plus.io.convertAbsoluteFileSystem(e);if(n!==e)return n;e=e.substr(1)}return"_www/"+e}(e),(function(e){e.file((function(e){var a=new plus.io.FileReader;a.onload=function(e){n(e.target.result)},a.onerror=function(e){t(e)},a.readAsDataURL(e)}),(function(e){t(e)}))}),(function(e){t(e)}))}))};var i=a(t("53ca"));t("c975"),t("d3b7"),t("d9e2"),t("d401"),t("ac1f"),t("466d"),t("81b2"),t("0eb6"),t("b7ef"),t("8bd4"),t("ace4"),t("5cc6"),t("907a"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("986a"),t("1d02"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("b39a"),t("72f7"),t("3ca3"),t("ddb0"),t("2b3d"),t("9861"),t("5319")},5616:function(e,n,t){"use strict";var a=t("cda2"),i=t.n(a);i.a},"5ba5":function(n,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("14d9");a("2f74");var i={data:function(){return{msg:"",isSound:!0,AutoClip:!0,backCamera:!1,loginPhone:"",data:[],Base64:""}},onLoad:function(){},methods:{inter:function(e){var n=this;if(""==n.loginPhone)return uni.showToast({title:"请输入登录名",icon:"none"}),!1;n.Base64="";var t=uni.requireNativePlugin("PP-BaiduFace"),a={licenseName:"idl-license",licenseSuffix:"face-android",licenseId:"com-gcs-yzj-face-android",liveActionArray:["Eye","HeadLeft","HeadLeftOrRight"],bgColor:"#56445D",textColor:"#C5E99B",isSound:n.isSound,AutoClip:n.AutoClip,isBackCamera:n.backCamera};"iOS"==plus.os.name&&(a.licenseSuffix="face-ios",a.licenseId="com-gcs-yzj-face-ios"),1==e?t.faceliveness(a,(function(e){n.msg=(new Date).getHours()+":"+(new Date).getMinutes()+"  "+JSON.stringify(e)+"<br/>"+n.msg,'"OK"'==e.FaceStatusEnum&&n.saveImgs(e.base64ImageMap)})):2==e&&t.recycler(a,(function(e){n.msg=(new Date).getHours()+":"+(new Date).getMinutes()+"  "+JSON.stringify(e)+"<br/>"+n.msg,'"OK"'==e.FaceStatusEnum&&n.saveImgs(e.base64ImageMap)}))},saveImgs:function(e){var n=this;for(var t in n.logoSrcs=[],e){var a=e[t];n.bitmapsave(a),n.Base64=a}var i={url:n.$store.state.url+"Account/FaceLogin",method:"POST",data:{UserName:n.loginPhone,FileStr:n.Base64}};n.$http(i).then((function(e){n.$store.state.username=n.loginPhone,n.$store.state.token=e.Data,uni.setStorage({key:"Token",data:e.Data,success:function(){uni.setStorage({key:"admin",data:n.loginPhone,success:function(){uni.switchTab({url:"/pages/home/home"})}})}})}))},bitmapsave:function(n){var t=this,a=new plus.nativeObj.Bitmap("test");a.loadBase64Data(n,(function(e){a.save("_doc/_tmp/head"+(new Date).getTime()+".png",{},(function(e){t.logoSrcs.push(e.target)}))}),(function(){console.log("加载Base64图片数据失败："+JSON.stringify(e))}))}}};t.default=i},"73d6":function(e,n,t){var a=t("24fb");n=a(!1),n.push([e.i,".content[data-v-ab74b3c8]{text-align:center;height:%?400?%}.asd[data-v-ab74b3c8]{width:100%;height:200px;overflow:auto}.logo[data-v-ab74b3c8]{height:%?200?%;width:%?200?%;margin-top:%?50?%}.title[data-v-ab74b3c8]{font-size:%?36?%;color:#8f8f94}.msg[data-v-ab74b3c8]{text-align:left;padding:%?40?%;font-size:%?25?%;color:#f0ad4e}.inputArea[data-v-ab74b3c8]{padding:%?20?% 10%;.right{float:right}}.assd[data-v-ab74b3c8]{margin-top:30px;box-sizing:border-box}.inputClass[data-v-ab74b3c8]{border:2px solid #ccc;border-radius:22px;outline:0;padding:8px 15px;font-weight:700}",""]),e.exports=n},c6bf:function(e,n,t){"use strict";t.r(n);var a=t("1a0d"),i=t("d251");for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);t("5616");var s=t("f0c5"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"ab74b3c8",null,!1,a["a"],void 0);n["default"]=r.exports},cda2:function(e,n,t){var a=t("73d6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=t("4f06").default;i("c700daaa",a,!0,{sourceMap:!1,shadowMode:!1})},d251:function(e,n,t){"use strict";t.r(n);var a=t("5ba5"),i=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=i.a}}]);